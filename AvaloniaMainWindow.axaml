<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="AvaloniaiPhoneManager.MainWindow"
        Title="iPhone Firmware Manager"
        Width="800" Height="600"
        MinWidth="600" MinHeight="400">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Title -->
        <TextBlock Grid.Row="0" Text="ðŸ“± iPhone Firmware Manager" 
                   FontSize="24" FontWeight="Bold" 
                   HorizontalAlignment="Center" Margin="10"/>
        
        <!-- Device Status -->
        <GroupBox Grid.Row="1" Header="Device Status" Margin="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Connection:" Margin="0,0,10,0"/>
                <TextBlock Grid.Row="0" Grid.Column="1" Name="StatusText" Text="Checking..." Foreground="Orange"/>
                
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Mode:" Margin="0,0,10,0"/>
                <TextBlock Grid.Row="1" Grid.Column="1" Name="ModeText" Text="Unknown" Foreground="Gray"/>
                
                <Button Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" 
                        Name="RefreshButton" Content="Refresh Status" 
                        Click="RefreshButton_Click" Margin="10,0,0,0"/>
            </Grid>
        </GroupBox>
        
        <!-- IPSW File Selection -->
        <GroupBox Grid.Row="2" Header="Firmware File (IPSW)" Margin="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="IPSW File:" Margin="0,0,10,0" VerticalAlignment="Center"/>
                <TextBox Grid.Column="1" Name="IpswTextBox" IsReadOnly="True" Margin="0,0,10,0"/>
                <Button Grid.Column="2" Name="BrowseButton" Content="Browse" Click="BrowseButton_Click"/>
            </Grid>
        </GroupBox>
        
        <!-- Restore Options -->
        <GroupBox Grid.Row="3" Header="Restore Options" Margin="10">
            <StackPanel>
                <CheckBox Name="EraseCheckBox" Content="Erase all data (Full restore)" IsChecked="True"/>
                <CheckBox Name="ExcludeBasebandCheckBox" Content="Exclude baseband (Recommended for USB issues)" IsChecked="True"/>
                <CheckBox Name="DebugCheckBox" Content="Debug mode (Verbose output)" IsChecked="True"/>
            </StackPanel>
        </GroupBox>
        
        <!-- Log Output -->
        <GroupBox Grid.Row="4" Header="Output Log" Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <ScrollViewer Grid.Row="0" Name="LogScrollViewer">
                    <TextBlock Name="LogText" TextWrapping="Wrap" FontFamily="Consolas"/>
                </ScrollViewer>
                
                <Button Grid.Row="1" Name="ClearLogButton" Content="Clear Log" 
                        Click="ClearLogButton_Click" HorizontalAlignment="Left" Margin="0,5,0,0"/>
            </Grid>
        </GroupBox>
        
        <!-- Action Buttons -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
            <Button Name="RestoreButton" Content="Start Restore" Click="RestoreButton_Click" 
                    Margin="0,0,10,0" Width="120" Height="35"/>
            <Button Name="ForceRestartButton" Content="Force Restart Device" Click="ForceRestartButton_Click" 
                    Margin="0,0,10,0" Width="150" Height="35"/>
            <Button Name="ExitRecoveryButton" Content="Exit Recovery Mode" Click="ExitRecoveryButton_Click" 
                    Width="150" Height="35"/>
        </StackPanel>
    </Grid>
</Window>
